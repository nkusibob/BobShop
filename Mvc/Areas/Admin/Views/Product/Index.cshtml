@model IEnumerable<Mvc.Models.Product>

@using Mvc.Helpers;

@{
    ViewBag.Title = "Products";
   // Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}
<div class="col-md-11">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">List Of Products</h3>
            <div class="actions pull-right">
                <i class="fa fa-chevron-down"></i>
                <i class="fa fa-times"></i>
            </div>
        </div>
        <div class="panel-body">
            <div role="grid" id="example_wrapper" class="dataTables_wrapper form-inline no-footer">
                </div>

            <table id="example" class="table table-striped table-bordered dataTable no-footer" cellspacing="0" width="100%" aria-describedby="example_info" style="width: 100%;">
                <thead>
                    <tr role="row">
                        <th class="sorting_asc" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column ascending" style="width: 161px;">@Html.DisplayNameFor(model => model.FirstOrDefault().Category.CategoryName)</th>
                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 270px;">@Html.DisplayNameFor(model => model.FirstOrDefault().ProductName)</th>
                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 121px;">Price</th>
                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 56px;">Last Price Update</th>
                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 117px;">Description</th>
                        <th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 95px;">Associated media</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var item in Model)
                    { 
                        <tr>
                            <td>
                                @item.Category.CategoryName
                            </td>
                            <td>
                                @item.ProductName
                            </td>
                            <td>
                                @foreach( var m in @item.Prices)
                                {
                                    @m.PriceValue <br/>
                                }
                               
                            </td>
                            <td>
                                @item.ProductAddingDate
                            </td>
                            <td>
                                @if (item.ProductLongDescription != null) {
                                    @Html.Truncate(item.ProductLongDescription, 16);
                                }
                            </td>
                            @*<td>
                           @if (item.Medium.Count > 0) { 
                                <img src="@item.Medium.ElementAt(0).MediaUrl">
                           }
                            </td>*@

                            <td>
                                @Html.ActionLink("Edit", "Edit", new { id = item.ProductID }) |
                                @Html.ActionLink("Details", "Details", new { id = item.ProductID }) |
                                @Html.ActionLink("Delete", "Delete", new { id = item.ProductID })
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

        </div>

    </div>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
</div>